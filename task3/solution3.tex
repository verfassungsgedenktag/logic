\input{preamble}

\begin{document}
    \section*{Домашнее задание №3, Марченко М.}

    \begin{problem}[1]
        Говорят, что формула \(\varphi(x_1, \ldots, x_k)\) условно фильтруется по фильтру \(F\) на множестве \(I\), если для любого семейства структур \(\{\bA_i\}_{i \in I}\) из \(\{i : \bA_i \models \varphi(a_1(i), \ldots, a_k(i))\} \in F\) следует \(\bA_F \models \varphi([a_1], \ldots, [a_k])\). Если же \(\{i : \bA_i \models \varphi(a_1(i), \ldots, a_k(i))\} \in F\) равносильно \(\bA_F \models \varphi([a_1], \ldots, [a_k])\), то говорят, что \(\varphi(x_1, \ldots, x_k)\) фильтруется по \(F\).

        Докажите, что если \(\varphi, \psi\) условно фильтруются по \(F\), то и \(\varphi \land \psi\), \(\forall x \ \varphi\), \(\exists x\ \varphi\) условно фильтруются по \(F\).

        Докажите, что если \(\varphi, \psi\) фильтруются по \(F\), то и \(\varphi \land \psi\), \(\exists x \ \varphi\) фильтруются по \(F\).
    \end{problem}
    \begin{proof}[Решение]
        Определим следующие множества:
        \begin{gather*}
            J^{\varphi} = \{i : \bA_i \models \varphi(a_1(i), \ldots, a_k(i))\}, \\
            J^{\psi} = \{i : \bA_i \models \psi(a_1(i), \ldots, a_k(i))\}, \\
            J = \{i : \bA_i \models (\varphi \land \psi)(a_1(i), \ldots, a_k(i))\}.
        \end{gather*}
        Так как \(\varphi \land \psi\) истинна в точности тогда, когда истинны \(\varphi\) и \(\psi\), \(J = J^{\varphi} \cap J^{\psi}\). Пусть \(J \in F\), тогда \(J^{\varphi}, J^{\psi} \in F\) как надмножества \(J\). Из этого следует, что \(\varphi\) и \(\psi\) истинны, а значит, истинна и \(\varphi \land \psi\).

        Положим \(J = \{i : \bA_i \models (\forall x \ \varphi)(a_1(i), \ldots, a_{k-1}(i))\}\). \(J\) является пересечением всех множеств вида \(\{i : \bA_i \models \varphi(a_1(i), \ldots, x(i), \ldots, a_k(i))\}\), где \(x \in A = \prod_{i \in I} A_i\). И если \(J \in F\), то как надмножества \(J\) они все также принадлежат \(F\), откуда и следует истинность \((\forall x \ \varphi)([a_1], \ldots, [a_{k-1}])\).

        Аналогично положим \(J = \{i : \bA_i \models (\forall x \ \varphi)(a_1(i), \ldots, a_{k-1}(i))\}\). \(J \in F\) в том и только том случае, когда существует \(x \in A = \prod_{i \in I} A_i\) такой, что \(\{i : \bA_i \models \varphi(a_1(i), \ldots, x(i), \ldots, a_k(i))\} \in F\). Из этого следует истинность \(\varphi([a_1], \ldots, [a_k])\), а следовательно, и \((\exists x \ \varphi)([a_1], \ldots, [a_{k-1}])\). \qed

        Достаточно доказать обратное следствие. Пусть \((\varphi \land \psi)([a_1], \ldots, [a_k])\) истинна, тогда истинны \(\varphi([a_1], \ldots, [a_k])\) и \(\psi([a_1], \ldots, [a_k])\) также истинны. Откуда (в прошлых обозначениях) \(J^{\varphi}, J^{\psi} \in F\), а следовательно, \(J \in F\).

        Аналогично докажем обратное следствие. Пусть \((\exists x \ \varphi)([a_1], \ldots, [a_{k-1}])\) истинна, откуда существует \(x \in A\) такой, что \(\varphi([a_1], \ldots, x(i), \ldots [a_k])\) истинна. Так как \(\varphi\) фильтруется по \(F\), то множество~\(J^x = \{i : \bA_i \models \varphi(a_1(i), \ldots, a_k(i))\} \in F\). \(J\) (в предыдущих обозначениях) является объединением множеств вида \(J^x\) по всем \(x \in A\) и как надмножество также принадлежит \(F\).
    \end{proof}

    \begin{problem}[2]
        Докажите, что любое фильтрованное произведение групп (предпорядков, частичных порядков) является группой (предпорядком, частичным порядком).

        Докажите, что для линейных порядков аналогичное утверждение, вообще говоря, неверно, но оно верно для ультрапроизведений.
    \end{problem}
    \begin{proof}[Решение]
        Пусть \(\{\bG_i\}_{i \in I}\) --- произвольное семейство групп, а \(F\) --- произвольный фильтр. Проверим, что в \(\bG_F\) выполняются аксиомы группы.
        \begin{description}
            \item[Ассоциативность:] по определению \([g_1] \cdot ([g_2] \cdot [g_3]) = [g]\), где \(g(i) = g_1(i) \cdot (g_2(i) \cdot g_3(i))\) для любого \(i \in I\). Но \(g(i) = g_1(i) \cdot (g_2(i) \cdot g_3(i)) = (g_1(i) \cdot g_2(i)) \cdot g_3(i)\), так как \(\bG_i\) --- группа. Отсюда получаем \([g_1] \cdot ([g_2] \cdot [g_3]) = [g] = ([g_1] \cdot [g_2]) \cdot [g_3]\).
            \item[Нейтральный элемент:] очевидно, что \([e]\), где \(e(i) = e\) для каждого \(i \in I\), --- нейтральный элемент в \(\bG_F\).
            \item[Обратный элемент:] рассмотрим \([g]\), тогда \([g^{-1}]\), где \(g^{-1}(i) = (g(i))^{-1}\) для любого \(i \in I\), --- обратный к \([g]\). 
        \end{description}

        Теперь рассмотрим семейством предпорядков \(\{\bA_i\}_{i \in I}\) и их фильтрованное произведение \(\bA_F\) и проверим выполнение аксиом предпорядка. Рефлексивность выполняется, так как множество \(\{i : x(i) \leqslant x(i)\} = I \in F\) для любого фильтра \(F\). Проверим транзитивность:
        \begin{multline*}
            [x] \leqslant [y] \land [y] \leqslant [z] \iff \{i : x(i) \leqslant y(i)\} \cap \{i : y(i) \leqslant z(i)\} \in F \implies \\
            \implies \{i : x(i) \leqslant z(i)\} \in F \iff [x] \leqslant [z].
        \end{multline*}

        Для частичных порядков осталось проверить антисимметричность: из того, что множество \(\{i : x(i) \leqslant y(i)\} \cap \{i : y(i) \leqslant x(i)\} \in F\), следует, что на нём \(x(i) = y(i)\), а значит, и \([x] = [y]\). \qed

        Для контрпримера достаточно взять в качестве фильтра \(F = \{I\}\) и любые \([x], [y]\) такие, что существуют \(i, j \in I\) такие, что \(x(i) \leqslant y(i) \land y(j) \leqslant x(j)\).
        
        В случае же, если \(F\) --- ультрафильтр, из \(\{i : x(i) \leqslant y(i)\} \not \in F\) следует \(\{i : y(i) \leqslant x(i)\} \in F\). Значит, из \([x] \not\leqslant [y]\) следует \([y] \leqslant [x]\).
    \end{proof}

    \begin{problem}[3]
        Теория (то есть множество предложений) в сигнатуре с равенством называется категоричной, если она имеет единственную модель (с точностью до изоморфизма).

        Докажите, что если теория категорична, то её единственная модель конечна.

        Докажите, что любая конечная структура конечной сигнатуры с равенством является единственной (с точностью до изоморфизма) моделью подходящей теории.
    \end{problem}
    \begin{proof}[Решение]
        TODO
    \end{proof}
    
    \begin{problem}[4]
        Докажите, что если теория не более чем счётной сигнатуры не имеет конечных моделей и категорична в некоторой мощности (то есть имеет единственную (с точностью до изоморфизма) модель этой мощности), то она полна (то есть любое предложение или само следует из этой теории, или его отрицание следует из этой теории).
    \end{problem}
    \begin{proof}[Решение]
        %Пусть эта теория \(T\) неполна, то есть для некоторого предложения \(\varphi\) теории \(T \cup \{\varphi\}\) и \(T \cup \{\lnot \varphi\}\) имеют модель. Пусть \(\bA \models T \cup \{\varphi\}\) и \(\bB \models T \cup \{\lnot \varphi\}\). Тогда \(\bA\) и \(\bB\) также являются моделями теории \(T\).

        %Пользуясь теоремой о понижении мощности (а также не более чем счётностью сигнатуры) получим счётные \(\bA' \preceq \bA\) и \(\bB' \preceq \bB\).

        TODO
    \end{proof}

    \begin{problem}[5]
        Выведите из теоремы компактности, что существует полное упорядоченное поле (то есть упорядоченное поле, в котором каждое непустое ограниченное сверху множество имеет супремум). Докажите, что полное упорядоченное поле единственно с точностью до изоморфизма.
    \end{problem}
    \begin{proof}[Решение]
        TODO
    \end{proof}
\end{document}